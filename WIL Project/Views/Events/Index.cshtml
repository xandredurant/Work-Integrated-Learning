@model List<WIL_Project.Models.EventInformation>

@{
    ViewData["Title"] = "Event Details";
    Layout = "_Layout";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="~/css/Program.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/Events.css" asp-append-version="true" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Event Details</title>
</head>
<body class="events">

    <main>
        <section class="event-list">
            <div class="container">
                @foreach (var ev in Model)
                {
                    <div class="event" id="event@ev.EventID">
                        <h1 class="event-title">@ev.EventName</h1>
                        <div class="event-details" style="display: none;">
                            <p>Date: @ev.EventDate.ToString("MMMM dd, yyyy")</p>
                            <p>Time: @ev.EventDate.ToString("h:mm tt") - @ev.EventDate.AddHours(2).ToString("h:mm tt")</p>
                            <p>Location: @ev.EventLocation</p>
                            <p>Description: @ev.EventDescription</p>
                        </div>
                        <div class="event-reviews" id="reviews@ev.EventID">
                            <h2 class="reviews-title">Event Reviews</h2>

                            @if (ev.Reviews != null)
                            {
                                @foreach (var review in ev.Reviews)
                                {
                                    <div class="review">
                                        <div class="review-header">
                                            <span class="review-author">@review.UserInfo?.UserName</span>
                                            <span class="review-rating">Rating: @review.Rating/5</span>
                                        </div>
                                        <p class="review-text">@review.ReviewText</p>
                                    </div>
                                }
                            }
                            else
                            {
                                <p>No reviews available for this event.</p>
                            }
                        </div>
                    </div>
                }

            </div>
        </section>
    </main>


    <script>
        $(document).ready(function () {
            // Hide all event details and reviews initially
            $(".event-details, .event-reviews").hide();

            // Handle click events on event titles
            $(".event-title").click(function () {
                // Find the parent event container
                var eventContainer = $(this).closest(".event");

                // Toggle the visibility of event details and reviews within the clicked event
                eventContainer.find(".event-details, .event-reviews").slideToggle();
            });
        });
    </script>

</body>
</html>
